(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/template/profile/topList-lottery/topList-lottery"],{5222:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a")),o=a(n("e137")),c=a(n("20e2"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n,i,o,c,a){try{var r=t[c](a),s=r.value}catch(u){return void n(u)}r.done?e(s):Promise.resolve(s).then(i,o)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var c=t.apply(e,n);function a(t){u(c,i,o,a,r,"next",t)}function r(t){u(c,i,o,a,r,"throw",t)}a(void 0)})}}var l=function(){return n.e("components/y-confirm/y-confirm").then(n.bind(null,"762f"))},f=function(){return n.e("components/y-confirm/y-input-confirm").then(n.bind(null,"ec3b"))},p=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"5589"))},m={components:{yConfirm:l,yModal:p,yInputConfirm:f},data:function(){return{top1:c.default,sexModalShow:!1,sum:0,chance:0,allHide:!1,subShow:null,lotterySub:!1,lotteryInfo:{},lotteryBoxShow:!1,lotteryBox:{},exchangeBoxShow:!1,exchangeBox:{},buyBoxShow:!1,buyBox:{},batchBoxShow:!1,batchLotteryBoxShow:!1,lotteryRuleShow:!1,lotteryOnceImage:"",giftImage:"",batchNeedCount:"??",batchChooseIndex:"",luckyPrize:[],list:[{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-qiche.png",index:0,direction:"right"},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-shoubiao.png",index:1},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-iphonex.png",index:2},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-bingxiang.png",index:3},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-chuifengji.png",index:11},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-10kg.png",index:12},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-5kg.png",index:13},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-xiyiji.png",index:4},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-zhazhiji.png",index:10},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-0.1kg.png",index:15},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-1kg.png",index:14},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-kongtiao.png",index:5},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-kouhong.png",index:9},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-dianfengshan.png",index:8},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-weibolu.png",index:7},{img:"https://gzjimibao.oss-cn-shenzhen.aliyuncs.com/prize/prize-dianfanbao.png",index:6}],box:[{count:5,discount:"99折"},{count:10,discount:"98折"},{count:20,discount:"96折"},{count:50,discount:"95折"},{count:100,discount:"9折"},{count:500,discount:"85折"}],detail:[{title:"特等奖",name:"市价40万宝马X3汽车一台"},{title:"一等奖",name:"市价1.5万浪琴名士手表一块"},{title:"二等奖",name:"市价8千元苹果X手机一部"},{title:"三等奖",name:"市价5999元海尔冰箱一台"},{title:"四等奖",name:"市价4999元海尔洗衣机一台"},{title:"五等奖",name:"市价3000元格力智能空调一台"},{title:"六等奖",name:"市价500元苏泊尔电饭煲一个"},{title:"七等奖",name:"市价399元美的微波炉1个"},{title:"八等奖",name:"市价299元美的电风扇一台"},{title:"九等奖",name:"市价199元MAC口红1个"},{title:"十等奖",name:"市价99元苏泊尔榨汁机1个"},{title:"十一等奖",name:"市价69元飞科吹风机1个"},{title:"十二等奖",name:"奖励米粒10kg"},{title:"十三等奖",name:"奖励米粒5kg"},{title:"十四等奖",name:"奖励米粒1kg"},{title:"幸运奖",name:"奖励米粒0.1kg"}],rule:["活动开始时间：2019年5月13日，结束时间以集米宝官方通告公布为准。","参与活动对象：所有在集米宝app已实名的会员朋友。","活动注意事项：参与活动前，请详细阅读本活动规则，凡参与活动者，则被认为同意活动规则。","抽奖前，需用米粒兑换抽奖次数，1kg米粒可以兑换5次抽奖机会，兑换次数不受限制，且抽奖过程不产生手续费。","批量抽奖无需兑换，并有优惠和折扣。","中奖信息以抽奖页面的弹窗提示和系统消息为准，虚拟类奖励可在抽奖记录中查看，实物类奖励需在中奖后三个工作日内联系我司客服填写收货信息，且中奖者需自行承担运费及相关税费。","如未在三个工作日内联系我司客服填写收货信息，则被视为放弃奖励。","所有中奖奖品，不得要求折换成现金或者更换产品。","中奖奖品以收到的实物为准。","如需人工协助，请联系我司客服。","最终解释权归广州集米宝网络科技有限公司。"]}},onLoad:function(){this.getData()},onShow:function(){var t=this;setTimeout(function(){t.allHide=!0},300)},watch:{batchBoxShow:function(t){this.batchChooseIndex="",this.batchNeedCount="??"}},methods:{getData:function(){var t=h(i.default.mark(function t(){var e,n;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.default.home();case 2:return e=t.sent,e.success&&(this.sum=e.data.FirmFunds.lastbalance),t.next=6,o.default.lotteryChance();case 6:n=t.sent,n.success&&(this.chance=n.data.availabletimes);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),lotteryOnce:function(){var t=h(i.default.mark(function t(){var e;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this,t.next=3,o.default.lottery();case 3:e=t.sent,e.success?(this.lotteryInfo=e.data,this.getData(),this.checkImage(e.data),this.lotteryOnceAnimate()):"你的抽奖可用次数已不足1次"===e.message&&(this.exchangeBoxShow=!0);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),checkImage:function(t){var e=this;this.list.forEach(function(n){n.index===parseInt(t.prizeid)/100-1&&(e.lotteryOnceImage=n.img)})},buyAfter:function(){this.getData(),setTimeout(function(){t.showToast({title:"兑换成功"})},100)},lotteryOnceAnimate:function(){var t=this;this.subShow=0,this.lotterySub=!0;var e=0,n=setInterval(function(){t.subShow+=1,t.subShow>15&&(t.subShow=0,e+=1),e>1&&t.subShow===parseInt(t.lotteryInfo.prizeid)/100-1&&(t.lotterySub=!1,clearInterval(n),t.list.forEach(function(e){parseInt(e.index)===parseInt(t.lotteryInfo.prizeid)/100-1&&(t.giftImage=e.img)}),t.lotteryBoxShow=!0)},50)},exchangeSuccess:function(){var t=this;this.exchangeBoxShow=!1,setTimeout(function(){t.buyBoxShow=!0},200)},lotterySuccess:function(t){this.lotteryBoxShow=!1},buySuccess:function(e){var n=this;if(console.log(e," at pages\\template\\profile\\topList-lottery\\topList-lottery.vue:270"),e){/^[0-9]+$/.test(e)?o.default.lotteryExchange(e).then(function(t){t.success&&(n.buyBoxShow=!1,n.buyAfter())}):t.showToast({title:"兑换数量必须大于0",icon:"none"})}else t.showToast({title:"请输入兑换个数",icon:"none"})},batchLottery:function(){this.batchBoxShow=!0},batchChoose:function(){var t=h(i.default.mark(function t(e){var n;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.batchChooseIndex=e,t.next=3,o.default.batchNeedCount({number:e});case 3:n=t.sent,n.success&&(this.batchNeedCount=n.data);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),batchSubmit:function(){var e=h(i.default.mark(function e(){var n,c;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.batchChooseIndex){e.next=3;break}return t.showToast({title:"请选择批量次数",icon:"none"}),e.abrupt("return",!1);case 3:return e.next=5,o.default.batchLottery({number:this.batchChooseIndex});case 5:n=e.sent,n.success&&(c=[],n.data.forEach(function(t){0!==t.winNumber&&c.push(t)}),this.checkPrize(c));case 7:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),checkPrize:function(t){var e=this,n=this.list,i=[];n.forEach(function(e){t.forEach(function(t){var n=t.prizeid.toString().replace("00","");e.index===parseInt(n)-1&&i.push(r({},t,{img:e.img}))})}),this.luckyPrize=i,this.batchBoxShow=!1,setTimeout(function(){e.batchLotteryBoxShow=!0},100)},goRecord:function(){t.navigateTo({url:"./lottery-record"})}}};e.default=m}).call(this,n("6e42")["default"])},6436:function(t,e,n){},"6dd0":function(t,e,n){"use strict";n.r(e);var i=n("a251"),o=n("e145");for(var c in o)"default"!==c&&function(t){n.d(e,t,function(){return o[t]})}(c);n("7b06");var a=n("2877"),r=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,"c9748460",null);e["default"]=r.exports},"7b06":function(t,e,n){"use strict";var i=n("6436"),o=n.n(i);o.a},a251:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.lotteryRuleShow=!0},t.e1=function(e){t.sexModalShow=!1},t.e2=function(e){t.lotteryBoxShow=!1},t.e3=function(e){t.lotteryBoxShow=!1},t.e4=function(e){t.exchangeBoxShow=!1},t.e5=function(e){t.buyBoxShow=!1},t.e6=function(e){t.batchBoxShow=!1},t.e7=function(e){t.batchLotteryBoxShow=!1},t.e8=function(e){t.batchLotteryBoxShow=!1},t.e9=function(e){t.lotteryRuleShow=!1},t.e10=function(e){t.lotteryRuleShow=!1})},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},e145:function(t,e,n){"use strict";n.r(e);var i=n("5222"),o=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,function(){return i[t]})}(c);e["default"]=o.a}},[["e473","common/runtime","common/vendor"]]]);