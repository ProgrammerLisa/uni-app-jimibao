(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/template/profile/setting/forget-password"],{"3c29":function(e,t,n){},6374:function(e,t,n){"use strict";n.r(t);var r=n("ce91"),s=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);t["default"]=s.a},bd3d:function(e,t,n){"use strict";var r=n("3c29"),s=n.n(r);s.a},bd93:function(e,t,n){"use strict";n.r(t);var r=n("cc24"),s=n("6374");for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n("bd3d");var o=n("2877"),u=Object(o["a"])(s["default"],r["a"],r["b"],!1,null,"aaff80d8",null);t["default"]=u.exports},cc24:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showPassword=!e.showPassword})},s=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s})},ce91:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("a34a")),s=o(n("c3b0")),a=o(n("7cc9"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,s,a,o){try{var u=e[a](o),i=u.value}catch(c){return void n(c)}u.done?t(i):Promise.resolve(i).then(r,s)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var a=e.apply(t,n);function o(e){c(a,r,s,o,u,"next",e)}function u(e){c(a,r,s,o,u,"throw",e)}o(void 0)})}}var f={data:function(){return{codeText:"获取验证码",disabled:!1,password:"",phone:"",showPassword:!0,type:""}},onLoad:function(t){this.type=t;var n=this;e.setNavigationBarTitle({title:"找回"+t.title});try{var r=e.getStorageSync("user");r&&(n.phone=r.phone)}catch(t){}},methods:{goback:function(){e.navigateBack({delta:2})},getCode:function(){var t=d(r.default.mark(function t(){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.sendCode({phone:this.phone});case 2:n=t.sent,n.success&&(this.disabled=!0,this.disabledAnimate(),e.showToast({title:"短信验证码已发送",icon:"none"}));case 4:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),disabledAnimate:function(){var e=this,t=90;this.codeText=t+"s";var n=setInterval(function(){t>0?(t-=1,e.codeText=t+"s"):(clearInterval(n),e.codeText="获取验证码",e.disabled=!1)},1e3)},formSubmit:function(e){if(this.checkForm(e.detail.value))switch(this.type.type){case"Tread":this.sendTreadRequest(u({},e.detail.value,{phone:this.phone}));break;case"Login":var t={};t.newPassword=e.detail.value.newTradePassword,t.newprePassword=e.detail.value.newpreTradePassword,this.sendLoginRequest(u({},t,{phone:this.phone}))}},sendTreadRequest:function(){var t=d(r.default.mark(function t(n){var s,o;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=this,t.next=3,a.default.forgetTreadPwd(n);case 3:o=t.sent,o.success&&(e.showToast({title:"修改成功"}),setTimeout(function(){s.goback()},500));case 5:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),sendLoginRequest:function(){var t=d(r.default.mark(function t(n){var s;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.forgetLoginPwd(n);case 2:s=t.sent,s.success&&(e.showToast({title:"请重新登录"}),setTimeout(function(){e.removeStorage({key:"user",success:function(t){e.reLaunch({url:"/pages/login/login/login"})}})},500));case 4:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),checkForm:function(t){var n,r=this;for(var s in t){var a=r.checkItem(s,t[s]);if(!a.status)return e.showToast({title:a.message,icon:"none"}),!1;n=!0}return n},checkItem:function(e,t){switch(e){case"phoneCode":return t?{status:!0}:{status:!1,message:"请输入验证码"};case"newTradePassword":return t?s.default.password.test(t)?{status:!0}:{status:!1,message:"密码8-16位，至少含数字/字母/字符2种组合"}:{status:!1,message:"请输入新密码"};case"newpreTradePassword":return t?t!==this.password?{status:!1,message:"两次密码输入不一致"}:{status:!0}:{status:!1,message:"请确认新密码"}}}}};t.default=f}).call(this,n("6e42")["default"])}},[["1264","common/runtime","common/vendor"]]]);