(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/template/profile/feedback-add/feedback-add"],{"09d4":function(e,t,n){"use strict";n.r(t);var a=n("f204"),r=n("5223");for(var u in r)"default"!==u&&function(e){n.d(t,e,function(){return r[e]})}(u);n("ae4c");var s=n("2877"),o=Object(s["a"])(r["default"],a["a"],a["b"],!1,null,"37f291cd",null);t["default"]=o.exports},5223:function(e,t,n){"use strict";n.r(t);var a=n("f6a2"),r=n.n(a);for(var u in a)"default"!==u&&function(e){n.d(t,e,function(){return a[e]})}(u);t["default"]=r.a},"78e0":function(e,t,n){},ae4c:function(e,t,n){"use strict";var a=n("78e0"),r=n.n(a);r.a},f204:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},f6a2:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("a34a")),r=o(n("e137")),u=n("2574"),s=o(n("c3b0"));function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,r,u,s){try{var o=e[u](s),c=o.value}catch(i){return void n(i)}o.done?t(c):Promise.resolve(c).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var u=e.apply(t,n);function s(e){c(u,a,r,s,o,"next",e)}function o(e){c(u,a,r,s,o,"throw",e)}s(void 0)})}}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){return n.e("components/mpvue-picker/mpvuePicker").then(n.bind(null,"8b54"))},d=function(){return n.e("components/uni-icon/uni-icon").then(n.bind(null,"d227"))},h={components:{mpvuePicker:m,uniIcon:d},data:function(){return{imageUrl:"",form:{messagetype:""},themeColor:"#007AFF",cityPickerValueDefault:[0,0,1],pickerSingleArray:[{label:"解绑(提供身份证正面)",value:1},{label:"解冻(提供身份证正面)",value:2},{label:"商圈售后(提供订单号截图)",value:3},{label:"其他问题",value:4}]}},methods:{goBack:function(){e.navigateBack()},onCancel:function(){},onConfirm:function(e){this.form.messagetype=e.label},showSinglePicker:function(){this.$refs.mpvuePicker.show()},chooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){(0,u.pathToBase64)(e.tempFilePaths[0]).then(function(e){t.imageUrl=e})},fail:function(t){e.showToast({title:"取消选择",icon:"none"})}})},formSubmit:function(t){if(this.checkForm(t.detail.value)){var n=t.detail.value;if(!this.imageUrl)return e.showToast({title:"请上传相关图片",icon:"none"}),!1;this.sendForm(f({},n,{file:this.imageUrl,type:"feedback"}))}},sendForm:function(){var t=i(a.default.mark(function t(n){var u,s=this;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.default.addFeedback(n);case 2:u=t.sent,u.success&&(e.showToast({title:"反馈成功"}),setTimeout(function(){s.goBack()},500));case 4:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),checkForm:function(t){var n,a=this;for(var r in t){var u=a.checkItem(r,t[r]);if(!u.status)return e.showToast({title:u.message,icon:"none"}),!1;n=!0}return n},checkItem:function(e,t){switch(e){case"name":return t?t.length<2||t.length>15?{status:!1,message:"姓名不正确"}:{status:!0}:{status:!1,message:"请输入姓名"};case"phone":return t?s.default.phone.test(t)?{status:!0}:{status:!1,message:"手机号码格式不正确"}:{status:!1,message:"请输入电话号码"};case"idcard":return t?s.default.IdCard.test(t)?{status:!0}:{status:!1,message:"身份证号码格式不正确"}:{status:!1,message:"身份证不能为空"};case"messagetype":return t?{status:!0}:{status:!1,message:"请选择问题类型"};case"content":return t?{status:!0}:{status:!1,message:"请输入问题详情"}}}}};t.default=h}).call(this,n("6e42")["default"])}},[["c517","common/runtime","common/vendor"]]]);